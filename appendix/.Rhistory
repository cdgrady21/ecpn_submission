1500/122
122*6
24/70
143/.34
400/7
450/7
230*7
1610-900
780+900
1680/7
130*5
650/60
70*8
rm(list=ls())
library(readtext)
library(quanteda)
library(stringi)
install.packages("quanteda")
install.packages("quanteda")
library(readtext)
library(quanteda)
install.packages("Rcpp")
install.packages("Rcpp")
library(quanteda)
library(stringi)
88/12
42/8
3000*52
.05*3000
.5*(1-.5)/1000
.9*(1-.9)/1000
99/14
600*2
600*2
2400+300
2300-600
1700/2
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
rbind(a,sampl(b))
rbind(a,sample(b))
set.seed(47623)
rbind(a,sample(b))
set.seed(47623)
rbind(a,sample(b))
set.seed(47622)
rbind(a,sample(b))
set.seed(47623)
rbind(a,sample(b))
50*2*6
500/600
161/7
113/4
500/8
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(0801264)
rbind(a,sample(b))
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(782022)
rbind(a,sample(b))
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(8202022)
rbind(a,sample(b))
set.seed(20082022)
rbind(a,sample(b))
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(20082022)
rbind(a,sample(b))
setwd("C:/Users/chris/Repos/ecpn_submission/appendix")
rm(list=ls())
library(RItools)
library(RItools)
update.packages("RItools")
library(RItools)
library(RItools)
library(RItools)
load("../data_and_code/survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../data_and_code/obs_dat/a_clean/a_obsDat_clean.rda")
outcome_list <- c("attitude_cw_base", "in_cw_base", 'contactOnly_cw_base',
'rand_lm_base', "rand_outcome_base", "end_exp_base")
demos_list <- c("age_base", "end_expTR_base", "rand_condition_base")
?xBalance
ag.df$treatment
?formula
?fmla
formula(treament~paste(c(outcome_list, demos_list))
)
test <- c(outcome_list, demos_list)
test
test <- paste0(c(outcome_list, demos_list), separate=",")
test
test <- paste0(c(outcome_list, demos_list), collapse=",")
test
test <- paste0(c(outcome_list, demos_list), collapse=" + ")
test
bal_fmla <- formula(treament~attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base + age_base + end_expTR_base + rand_condition_base))
bal_fmla <- formula(treament~attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base + age_base + end_expTR_base + rand_condition_base)
bal_fmla
xBalance(bal_fmla, strata = factor(state), data=ag.df,
report=c("all"))
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
ag.df$treatment
nuclearplants
xBalance(pr~ date + t1 + t2 + cap + ne + ct + bw + cum.n,
data=nuclearplants,
report=c("all"))
bal_fmla <- formula(treament ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base + age_base + end_expTR_base + rand_condition_base)
bal_fmla
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
xBalance(bal_fmla, data=ag.df,
report=c("all"))
xBalance(treament ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base + age_base + end_expTR_base + rand_condition_base,
strata = factor(ag.df$state), data=ag.df,
report=c("all"))
xBalance(pr~ date + t1 + t2 + cap + ne + ct + bw + cum.n,
data=nuclearplants)
bal_fmla <- formula(treatment ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base + age_base + end_expTR_base + rand_condition_base)
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
bal_fmla <- formula(treatment ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base)
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
bal_fmla1 <- formula(treatment ~ attitude_index_base + in_index_base + contactOnly_index_base + rand_lm_base + rand_outcome_base + end_exp_base)
xBalance(bal_fmla1, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
xBalance(bal_fmla1, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
names(events)
names(markets)
event_list <- c("pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
events_fmla <- formula(treatment ~ pastoralists_index_raw + farmers_index_raw)
table(events$time
)
table(events$site, events$date)
table(events$site, events$date)
library(dplyr)
events %>% select(time %in% 0)
table(events$site)
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
summarise_all(mean, na.rm=T)
events_df
events_df <- events[events$time %in% 0,] %>% select(event_list) %>%
group_by(site) %>%
summarise_all(mean, na.rm=T)
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
events_df
names(markets)
markets_list <- c("pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
markets_list <- c("pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
markets_df
bal_df <- merge(events_df, markets_df, by="site")
bal_df
names(events_df) <- paste0(names(events_df), "_events")
events_df
names(markets_df) <- paste0(names(markets_df), "_markets")
bal_df <- merge(events_df, markets_df, by="site")
names(events_df[-1])
names(events_df)
names(events_df)[-1]
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
library(RItools)
library(dplyr)
load("../data_and_code/survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../data_and_code/obs_dat/a_clean/a_obsDat_clean.rda")
outcome_list <- c("attitude_cw_base", "in_cw_base", 'contactOnly_cw_base',
'rand_lm_base', "rand_outcome_base", "end_exp_base")
demos_list <- c("age_base", "end_expTR_base", "rand_condition_base")
bal_fmla <- formula(treatment ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base)
#bal_fmla1 <- formula(treatment ~ attitude_index_base + in_index_base + contactOnly_index_base + rand_lm_base + rand_outcome_base + end_exp_base)
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
event_list <- c("pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df[-1]) <- paste0(names(events_df[-1]), "_events")
markets_list <- c("pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df[-1]) <- paste0(names(markets_df[-1]), "_markets")
markets_df
paste0(names(markets_df[-1]), "_markets")
events_df
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
library(RItools)
library(dplyr)
load("../data_and_code/survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../data_and_code/obs_dat/a_clean/a_obsDat_clean.rda")
# Chunk 2
outcome_list <- c("attitude_cw_base", "in_cw_base", 'contactOnly_cw_base',
'rand_lm_base', "rand_outcome_base", "end_exp_base")
demos_list <- c("age_base", "end_expTR_base", "rand_condition_base")
bal_fmla <- formula(treatment ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base)
#bal_fmla1 <- formula(treatment ~ attitude_index_base + in_index_base + contactOnly_index_base + rand_lm_base + rand_outcome_base + end_exp_base)
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
event_list <- c("pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-1] <- paste0(names(events_df)[-1], "_events")
markets_list <- c("pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-1] <- paste0(names(markets_df)[-1], "_markets")
events_df
markets_df
View(markets_df)
bal_df <- merge(events_df, markets_df, by="site")
bal_df
events_df
obs_df <- merge(events_df, markets_df, by="site")
rm(bal_df)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
library(RItools)
library(dplyr)
load("../data_and_code/survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../data_and_code/obs_dat/a_clean/a_obsDat_clean.rda")
# Chunk 2
outcome_list <- c("attitude_cw_base", "in_cw_base", 'contactOnly_cw_base',
'rand_lm_base', "rand_outcome_base", "end_exp_base")
demos_list <- c("age_base", "end_expTR_base", "rand_condition_base")
bal_fmla <- formula(treatment ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base)
#bal_fmla1 <- formula(treatment ~ attitude_index_base + in_index_base + contactOnly_index_base + rand_lm_base + rand_outcome_base + end_exp_base)
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
event_list <- c("pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-1] <- paste0(names(events_df)[-1], "_events")
markets_list <- c("pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-1] <- paste0(names(markets_df)[-1], "_market")
obs_df <- merge(events_df, markets_df, by="site")
obs_fmla <- formula(treatment ~ pastoralists_index_raw_event + farmers_index_raw_event
+ pastoralists_index_raw_market + farmers_index_raw_market)
xBalance(obs_fmla, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
obs_df
obs_fmla <- formula(treatment ~ pastoralists_index_rank_event + farmers_index_rank_event
+ pastoralists_index_rank_market + farmers_index_rank_market)
xBalance(obs_fmla, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
obs_df
event_list <- c("pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-1] <- paste0(names(events_df)[-1], "_events")
markets_list <- c("pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-1] <- paste0(names(markets_df)[-1], "_markets")
obs_df <- merge(events_df, markets_df, by="site")
obs_fmla <- formula(treatment ~ pastoralists_index_rank_events + farmers_index_rank_events
+ pastoralists_index_rank_markets + farmers_index_rank_markets)
xBalance(obs_fmla, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
event_list <- c("treatment", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-1] <- paste0(names(events_df)[-1], "_events")
markets_list <- c("treatment", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-1] <- paste0(names(markets_df)[-1], "_markets")
obs_df <- merge(events_df, markets_df, by="site")
obs_fmla <- formula(treatment ~ pastoralists_index_rank_events + farmers_index_rank_events
+ pastoralists_index_rank_markets + farmers_index_rank_markets)
obs_fmla
xBalance(obs_fmla, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
obs_df
stopifnot(obs_df$treatment_events==obs_df$treatment_markets)
obs_df$treatment <- obs_df$treatment_events
obs_df[, c("treatment_events", "treatment_markets")] <- NULL
obs_df
names(markets_df)[-3]
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-3]
names(events_df)[-1:3]
names(events_df)
names(events_df)[4:length(names(events_df))]
names(markets_df)[-c(1:3)]
names(events_df)[-c(1:3)]
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)
names(events_df)[-c(1:3)]
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-c(1:3)] <- paste0(names(events_df)[-3], "_events")
markets_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-c(1:3)] <- paste0(names(markets_df)[-1], "_markets")
obs_df <- merge(events_df, markets_df, by=c("site", "treatment", "State")
)
obs_df
markets_df <- markets[markets$time %in% 0,] %>% group_by(site, State) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
markets_df
markets_df2 <- markets_df
markets_df <- markets[markets$time %in% 0,] %>% group_by(site) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
markets_df
markets_df2
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site, State) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-c(1:3)] <- paste0(names(events_df)[-3], "_events")
markets_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site, State) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-c(1:3)] <- paste0(names(markets_df)[-1], "_markets")
obs_df <- merge(events_df, markets_df, by=c("site", "treatment", "State"))
obs_df
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site, State) %>%
select(event_list) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-c(1:3)] <- paste0(names(events_df)[-c(1:3)], "_events")
markets_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site, State) %>%
select(markets_list) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-c(1:3)] <- paste0(names(markets_df)[-c(1:3)], "_markets")
obs_df <- merge(events_df, markets_df, by=c("site", "treatment", "State"))
obs_df
obs_fmla <- formula(treatment ~ pastoralists_index_rank_events + farmers_index_rank_events
+ pastoralists_index_rank_markets + farmers_index_rank_markets)
xBalance(obs_fmla, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
mosaic::mean(obs_df$pastoralists_index_rank_markets~obs_df$treatment)
tapply(obs_df$pastoralists_index_rank_markets, obs_df$treatment, mean)
summary(obs_df$pastoralists_index_rank_markets)
summary(obs_df$pastoralists_index_rank_events)
names(events)
xBalance(obs_fmla, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
obs_fmla <- formula(treatment ~ pastoralists_index_raw_events + farmers_index_raw_events
+ pastoralists_index_raw_markets + farmers_index_raw_markets)
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site, State) %>%
select(event_list1) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-c(1:3)] <- paste0(names(events_df)[-c(1:3)], "_events")
markets_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site, State) %>%
select(markets_list1) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-c(1:3)] <- paste0(names(markets_df)[-c(1:3)], "_markets")
obs_df <- merge(events_df, markets_df, by=c("site", "treatment", "State"))
obs_fmla <- formula(treatment ~ pastoralists_index_rank_events + farmers_index_rank_events
+ pastoralists_index_rank_markets + farmers_index_rank_markets)
obs_fmla <- formula(treatment ~ pastoralists_index_raw_events + farmers_index_raw_events
+ pastoralists_index_raw_markets + farmers_index_raw_markets)
xBalance(obs_fmla, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
obs_df
xBalance(obs_fmla1, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
obs_fmla <- formula(treatment ~ pastoralists_index_raw_events + farmers_index_raw_events
+ pastoralists_index_raw_markets + farmers_index_raw_markets)
xBalance(obs_fmla1, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
obs_fmla1 <- formula(treatment ~ pastoralists_index_raw_events + farmers_index_raw_events
+ pastoralists_index_raw_markets + farmers_index_raw_markets)
xBalance(obs_fmla1, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
names(obs_df)
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site, State) %>%
select(event_list1) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-c(1:3)] <- paste0(names(events_df)[-c(1:3)], "_events")
markets_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site, State) %>%
select(markets_list1) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-c(1:3)] <- paste0(names(markets_df)[-c(1:3)], "_markets")
obs_df <- merge(events_df, markets_df, by=c("site", "treatment", "State"))
names(obs_df)
rm(list=ls())
library(RItools)
library(dplyr)
load("../data_and_code/survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../data_and_code/obs_dat/a_clean/a_obsDat_clean.rda")
outcome_list <- c("attitude_cw_base", "in_cw_base", 'contactOnly_cw_base',
'rand_lm_base', "rand_outcome_base", "end_exp_base")
demos_list <- c("age_base", "end_expTR_base", "rand_condition_base")
bal_fmla <- formula(treatment ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base)
#bal_fmla1 <- formula(treatment ~ attitude_index_base + in_index_base + contactOnly_index_base + rand_lm_base + rand_outcome_base + end_exp_base)
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site, State) %>%
select(event_list1) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-c(1:3)] <- paste0(names(events_df)[-c(1:3)], "_events")
markets_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site, State) %>%
select(markets_list1) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-c(1:3)] <- paste0(names(markets_df)[-c(1:3)], "_markets")
obs_df <- merge(events_df, markets_df, by=c("site", "treatment", "State"))
setwd("C:/Users/chris/Repos/ecpn_submission/appendix")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
library(RItools)
library(dplyr)
load("../data_and_code/survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../data_and_code/obs_dat/a_clean/a_obsDat_clean.rda")
# Chunk 2
outcome_list <- c("attitude_cw_base", "in_cw_base", 'contactOnly_cw_base',
'rand_lm_base', "rand_outcome_base", "end_exp_base")
demos_list <- c("age_base", "end_expTR_base", "rand_condition_base")
bal_fmla <- formula(treatment ~ attitude_cw_base + in_cw_base + contactOnly_cw_base + rand_lm_base + rand_outcome_base + end_exp_base)
#bal_fmla1 <- formula(treatment ~ attitude_index_base + in_index_base + contactOnly_index_base + rand_lm_base + rand_outcome_base + end_exp_base)
xBalance(bal_fmla, strata = factor(ag.df$state), data=ag.df,
report=c("all"))
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
events_df <- events[events$time %in% 0,] %>% group_by(site, State) %>%
select(event_list1) %>%
summarise_all(mean, na.rm=T)
event_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
event_list1 <- c("treatment", "State", "pastoralists_index", "farmers_index")
events_df <- events[events$time %in% 0,] %>% group_by(site, State) %>%
select(event_list1) %>%
summarise_all(mean, na.rm=T)
names(events_df)[-c(1:3)] <- paste0(names(events_df)[-c(1:3)], "_events")
markets_list <- c("treatment", "State", "pastoralists_index_rank", "farmers_index_rank")
markets_list1 <- c("treatment", "State", "pastoralists_index_raw", "farmers_index_raw")
markets_df <- markets[markets$time %in% 0,] %>% group_by(site, State) %>%
select(markets_list1) %>%
summarise_all(mean, na.rm=T)
names(markets_df)[-c(1:3)] <- paste0(names(markets_df)[-c(1:3)], "_markets")
obs_df <- merge(events_df, markets_df, by=c("site", "treatment", "State"))
obs_df
obs_fmla1 <- formula(treatment ~ pastoralists_index_events + farmers_index_events
+ pastoralists_index_raw_markets + farmers_index_raw_markets)
xBalance(obs_fmla1, strata = factor(obs_df$State), data=obs_df,
report=c("all"))
