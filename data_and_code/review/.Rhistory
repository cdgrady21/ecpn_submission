nrow(permutations(100,4))
nrow(permutations(40,4))
nrow(permutations(45,4))
1000000/500
3/15
5/15
1.4*725
750/725
150*725
8*75
6*5
2135/3
4000/700
install.packages("pandoc-crossref")
69+31
1.02^30
1.03^30
648*0.5
3+3
2322/2900
37/98
15+12+12+15+15
2019 - 1965
16000/700
16400/700
.42*700
3000*12
10*1600
(10*1600)/(5*6)
16000/(5*6*8)
3999.86-2135.81
2000-1864.05
134*775
ppl <- c(alice, basers, raj)
ppl <- c("alice", "basers", "raj")
sample(ppl)
sample(ppl)
sample(ppl)
set.seed(20200408)
set.seed(20200408)
sample(ppl)
sample(ppl)
sample(ppl)
set.seed(20200408)
sample(ppl)
set.seed(20200408)
sample(ppl)
1864.05+6734.8
4000/30
80000/180
480/60
150*.01
220*5.45
?rep
rep(1,4)
x <- c(rep(1,4),rep(0,29))
sample(x,5)
test <- do(1000)*sample(x,5)
test <- mosaic::do(1000)*sample(x,5)
test[1:5]
test$yes <- rowsum(test[,])
test$yes <- rowSums(test[,])
head(test)
tail(test)
test$yes <- ifelse(test$yes>0,1,0)
mean(test$yes)
test <- mosaic::do(1000)*sample(x,10)
test$yes <- rowSums(test[,])
test$yes <- ifelse(test$yes>0,1,0)
mean(test$yes)
bag <- (1,0,0,-1,-1,-2,-2,-3,-3,-4,-5,-2,-2,-3,-5)
bag <- c(1,0,0,-1,-1,-2,-2,-3,-3,-4,-5,-2,-2,-3,-5)
mean(bag)
twos <- do(10000)*sample(bag,2)
library(mosaic)
?sample
twos <- do(10000)*sample(bag,2)
head(twos)
bag <- c(1,1,0,0,-1,-1,-1,-2,-2,-3,-3,-4,-5,-2,-2,-3,-5)
mean(bag)
twos <- do(10000)*sample(bag,2)
twos$r <- max(twos[,1:2])
head(twos)
twos$r <- apply(twos[,1:2],1,max)
head(twos)
mean(twos$r)
bag <- c(1,1,0,0,-1,-1,-1,-2,-2,-3,-3,-4,-5,0,0,-3,-5)
mean(bag)
twos <- do(10000)*sample(bag,2)
twos$r <- apply(twos[,1:2],1,max)
mean(twos$r)
4*8
4*7
1/9
1/8
1/44
1/150
30*8
200/8
2000/30
25*8*5
15*8*5
48/3
550000/75000000
550000/30000000
150/2500
2650/2500
3359.51*26
3500*2
7000*12
240/8
install.packages(c("dplyr", "estimatr", "googlesheets4", "knitr", "mosaic", "qdap", "sentimentr", "tm"))
library(mosaic)
install.packages(stringi)
install.packages("stringi")
1500/122
122*6
24/70
143/.34
400/7
450/7
230*7
1610-900
780+900
1680/7
130*5
650/60
70*8
rm(list=ls())
library(readtext)
library(quanteda)
library(stringi)
install.packages("quanteda")
install.packages("quanteda")
library(readtext)
library(quanteda)
install.packages("Rcpp")
install.packages("Rcpp")
library(quanteda)
library(stringi)
88/12
42/8
3000*52
.05*3000
.5*(1-.5)/1000
.9*(1-.9)/1000
99/14
600*2
600*2
2400+300
2300-600
1700/2
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
rbind(a,sampl(b))
rbind(a,sample(b))
set.seed(47623)
rbind(a,sample(b))
set.seed(47623)
rbind(a,sample(b))
set.seed(47622)
rbind(a,sample(b))
set.seed(47623)
rbind(a,sample(b))
50*2*6
500/600
161/7
113/4
500/8
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(0801264)
rbind(a,sample(b))
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(782022)
rbind(a,sample(b))
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(8202022)
rbind(a,sample(b))
set.seed(20082022)
rbind(a,sample(b))
a <- c("chris", "nuole", "levi")
b <- c("wei", "wu", "shu")
set.seed(20082022)
rbind(a,sample(b))
3797.06*26
1000000*1.05^30
R. version
R.version
install.packages("rmarkdown")
tinytex::uninstall_tinytex()
remove.packages("tinytex")
sample(c("wonder", "sushi"))
sample(c("wonder", "sushi"),1)
sample(c("wonder", "sushi"),1)
set.seed(272023)
sample(c("wonder", "sushi"),1)
set.seed(20230207)
sample(c("wonder", "sushi"),1)
set.seed(20230207)
sample(c("wonder", "sushi"),1)
set.seed(20230207)
sample(c("wonder", "sushi"),1)
71.96/48
53.97/36
library(list)
install.package("list")
install.packages("list")
library(list)
install.packages("ict.reg")
library(list)
data(race)
set.seed(1)
diff.in.means.results <- ictreg(y ~ 1, data = race,
treat = "treat", J=3, method = "lm")
summary(diff.in.means.results)
head(race)
tapply(race$y, race$treat, mean)
diff.in.means.results
lm.results <- ictreg(y ~ south + age + male + college, data = race,
treat = "treat", J=3, method = "lm")
summary(lm.results)
?ictreg
ictreg
nls.results <- ictreg(y ~ south + age + male + college, data = race,
treat = "treat", J=3, method = "nls")
summary(nls.results)
ml.constrained.results <- ictreg(y ~ south + age + male + college, data = race,
treat = "treat", J=3, method = "ml",
overdispersed = FALSE, constrained = TRUE)
summary(ml.constrained.results)
lm.results <- ictreg(y ~ south + age + male + college, data = race,
treat = "treat", J=3, method = "lm")
summary(lm.results)
nls.results
8.23+5.68+12.44
8.23+5.68
mean(race$y==1)
tapply(race$y, race$treat, mean(race$y==1))
mean(race$y==1[race$treat %in% 0])
mean(race[race$treat %in% 0]$y==1)
mean(race$y==1[race$treat %in% 0,])
mean(race[race$treat %in% 0,]$y==1)
mean(race[race$treat %in% 1,]$y==1)
mean(race[race$treat %in% 0,]$y==0)
mean(race[race$treat %in% 1,]$y==0)
mean(race[race$treat %in% 0,]$y==0)
mean(race[race$treat %in% 1,]$y==0)
mean(race[race$treat %in% 0,]$y==1)#.014
mean(race[race$treat %in% 1,]$y==1)
12.44+8.23+29.95+29.62+19.77
text <- "kchang@socialimpact.com
iakpan@internationalbudget.org
milburn.line@tetratech.com
robert.underwood@tetratech.com
jindalp@state.gov
cintya@makingcents.com
fieldingcj@state.gov
wowens@allinfordev.com
chazbun@iri.org
roth.katie.a@dol.gov
danielle.schmitz@americanbar.org
fburil@ifes.org
ceo@frgoc9.com
gbevis@msi-inc.com
wmoammer@gmail.com
pomondi@internationalbudget.org
kathy.stermer@tetratech.com
rsharma@ifes.org
dbrinkerhoff.emeritus@rti.org
nayyarstone-ritu@norc.org
cspeidel@ndi.org
tatyana.pushkina@americanbar.org
mlatsabidze@ewmi.org"
gsub("\n", ",", text)
setwd("C:/Users/chris/Repos/ecpn_submission/appendix")
load("../data_and_code/survey_dat/d_analysis/list_of_coefs_and_ps.Rda")
load("../data_and_code/survey_dat/d_analysis/list_of_rank_bin_raw.Rda")
newList
var_tab
load("../data_and_code/survey_dat/d_analysis/list_of_coefs_and_ps_ind.Rda")
newList_ind
load("../data_and_code/survey_dat/d_analysis/list_of_rank_bin_raw_ind.Rda")
var_tab_ind
setwd("C:/Users/chris/Repos/ecpn_submission/data_and_code/review")
rm(list=ls())
# Load data I anticipate needing
load("../../c_creating_dataframes/f-aggregateComms_ap.Rdata")
# Load data I anticipate needing
load("../survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../survey_dat/c_creating_dataframes/rand_df.Rdata")
load("../survey_dat/b_creating_outcomes/f2-panelData.Rdata")
load("../obs_dat/b_analysis/eventsMedian.Rdata")
load("../obs_dat/b_analysis/marketMedian.Rdata")
# clean environment
rm(list=ls(pattern="Var|var|.fun|Fun|Col|Index|Indice|Stand|fmla|outcomes"))
## mediation awareness/participation
table(rand.df$ecpn_group.negotiation)
table(rand.df$heard_MC_group.heard_MC)
table(rand.df$heard_MC_group.part_MC)
# people who used boreholes
table(rand.df$qip_group.borehole_aware)
table(rand.df$qip_group.borehole_use)
# Functions
## True p-value function.
load("../survey_dat/d_analysis/true_fun.rda")
# Packages
library(estimatr)
library(dplyr)
library(tidyverse)
table(ag.df$qip_group.borehole_aware_base)
table(ag.df$qip_group.borehole_aware_end)
table(ag.df$qip_group.borehole_aware)
lm_robust(ag.df[,outcome_list_state[i]]~ag.df[,"treatment"]*qip_group.borehole_aware_end,
clusters = psu, data=ag.df)
lm_robust(ag.df[,'attitude']~ag.df[,"treatment"]*qip_group.borehole_aware_end,
clusters = psu, data=ag.df)
lm_robust(ag.df[,'attitude_cw']~ag.df[,"treatment"]*qip_group.borehole_aware_end,
clusters = psu, data=ag.df)
lm1 <- lm_robust(ag.df[,'attitude_cw']~ag.df[,"treatment"]*qip_group.borehole_aware_end,
clusters = psu, data=ag.df)
tidy(lm1)
lm1 <- lm_robust(attitude_cw~treatment*qip_group.borehole_aware_end,
clusters = psu, data=ag.df)
tidy(lm1)
lm1 <- lm_robust(attitude_end~treatment*qip_group.borehole_aware_end,
clusters = psu, data=ag.df)
lm1 <- lm_robust(attitude_cw_end~treatment*qip_group.borehole_aware_end,
clusters = psu, data=ag.df)
tidy(lm1)
lm(attitude_cw_end~treatment*qip_group.borehole_aware_end,
data=ag.df)
table(ag.df$treatment, ag.df$qip_group.borehole_use_end)
table(ag.df$treatment, ag.df$qip_group.borehole_use_end, exclude=c())
table(rand.df$treatment, rand.df$qip_group.borehole_aware)
table(rand.df$treatment, rand.df$qip_group.borehole_aware, exclude=c())
# must do effect of borehole use among subset of treated comms/ppl
lm1 <- lm_robust(attitude_cw_end~qip_group.borehole_use_end,
clusters = psu, data=ag.df[ag.df$treatment %in% 1])
tidy(lm1)
# lm doesnt make sense because TR and borehole use/aware almost perfectly correlated with TR
lm1 <- lm_robust(attitude_cw_end~treatment*qip_group.borehole_use_end,
clusters = psu, data=ag.df)
tidy(lm1)
# must do effect of borehole use among subset of treated comms/ppl
lm1 <- lm_robust(attitude_cw_end~qip_group.borehole_use_end,
clusters = psu, data=ag.df[ag.df$treatment %in% 1])
tidy(lm1)[, c(1,2,5)]
table(ag.df$qip_aware_end)
table(ag.df$attitude_cw)
# must do effect of borehole use among subset of treated comms/ppl
lm1 <- lm_robust(attitude_cw_end~qip_group.borehole_use_end,
clusters = psu, data=ag.df[ag.df$treatment %in% 1])
tidy(lm1)[, c(1,2,5)]
outcome_list <- c("attitude", "in", 'contactOnly',
'rMean', "end_exp",
"pgp_donate_end", "pgp_amount_end")
outcome_list_qip <- c(paste0(outcome_list[1:3], "_cw"), outcome_list[4:length(outcome_list)])
outcome_list_qip
outcome_list_qip <- c(paste0(outcome_list[1:3], "_cw"), outcome_list[4:length(outcome_list)])
qipList <- vector(mode="list", length=length(outcome_list_qip))
# loop over outcome list (from g-aggAnalysis-mainOutcomes.Rmd)
outcome_list <- c("attitude", "in", 'contactOnly',
'rMean', "end_exp",
"pgp_donate_end", "pgp_amount_end")
outcome_list_qip <- c(paste0(outcome_list[1:3], "_cw"), outcome_list[4:length(outcome_list)])
qipList <- vector(mode="list", length=length(outcome_list_qip))
for(i in 1:length(outcome_list_qip))
{
thelm <- lm_robust(ag.df[,outcome_list_qip[i]]~ag.df[,"qip_group.borehole_use_end"],
clusters = psu, data=ag.df[ag.df$treatment %in% 1])
qipList[[i]] <- tidy(thelm)[, c(1,2,5)]
}
names(qipList) <- outcome_list_qip
qipList
with(ag.df[ag.df$treatment %in% 1], plot(qip_group.borehole_use_end, attitude_cw))
with(ag.df[ag.df$treatment %in% 1], plot(qip_group.borehole_use_end, attitude_cw))
with(ag.df[ag.df$treatment %in% 1], plot(qip_group.borehole_use_end, attitude_cw))
corona.fun <- function(inf, mort, n=350)
{
inf*mort*n
}
corona.fun(inf=0.30,mort=.002)
possInf <- seq(0.10,0.50, 0.05)
possMort <- seq(0.002, 0.03, 0.003)
pars <- expand.grid(inf=possInf, mort=possMort)
pars$dead <- apply(pars,1,function(x){corona.fun(inf=x[[1]], mort=x[[2]])})
range(pars$dead)
summary(pars$dead)
likelyPars <- pars[(pars$inf <= 0.20 & pars$mort > 0.01) |
(pars$inf > 0.20 & pars$inf <= 0.40 & pars$mort < 0.02) |
(pars$inf > 0.40 & pars$mort <= 0.01),]
range(likelyPars$dead)
summary(likelyPars$dead)
pars
range(pars$dead)
summary(pars$dead)
corona.fun <- function(inf, mort, n=350)
{
inf*mort*n
}
corona.fun(inf=0.30,mort=.002)
possInf <- seq(0.10,0.50, 0.05)
possMort <- seq(0.002, 0.03, 0.003)
pars <- expand.grid(inf=possInf, mort=possMort)
pars$dead <- apply(pars,1,function(x){corona.fun(inf=x[[1]], mort=x[[2]])})
range(pars$dead)
summary(pars$dead)
likelyPars <- pars[(pars$inf <= 0.20 & pars$mort > 0.01) |
(pars$inf > 0.20 & pars$inf <= 0.40 & pars$mort < 0.02) |
(pars$inf > 0.40 & pars$mort <= 0.01),]
range(likelyPars$dead)
summary(likelyPars$dead)
1.0387*1000000
ggplot(ag.df, aes(x = qip_group.borehole_use_end, y = attitude_cw, color = psu)) +
geom_point()
ggplot(ag.df, aes(x = qip_group.borehole_use_end, y = attitude_cw, color = psu)) +
geom_point() +
geom_text(aes(label = psu), vjust = -1.5) +
theme_bw
ggplot(ag.df, aes(x = qip_group.borehole_use_end, y = attitude_cw, color = psu)) +
geom_point() +
geom_text(aes(label = psu), vjust = -1.5)
table(ag.df$comm)
table(ag.df$psu)
table(ag.df$psu, ag.df$attitude_cw)
ag.df[ag.df$psu %in% 6, "attitude_cw"]
ag.df[ag.df$psu %in% 6, "qip_group.borehole_use_end"]
ag.df[ag.df$psu %in% 6, ag.df$qip_group.borehole_aware]
ag.df[,c(ag.df$qip_group.borehole_aware, ag.df$psu)]
table(ag.df$qip_group.borehole_aware)
ag.df[ag.df$psu %in% 6, ag.df$qip_group.borehole_aware_end]
table(ag.df$qip_group.borehole_aware_end)
table(ag.df$qip_group.borehole_aware_end, ag.df$psu)
setwd("C:/Users/chris/Repos/ECPN_priv/data_and_code/survey_dat/a_cleaning")
rm(list=ls())
load("b_endlineRecode.Rdata")
load("b_baselineRecode.Rdata")
setwd("C:/Users/chris/Repos/ECPN_priv/data_and_code/survey_dat/a_cleaning")
########################
#Setup: set working directory, set libraries, scan in data, make variables, etc...
###############################
# need to set a working directory to this file location.
rm(list=ls())
library(mosaic)
library(plyr)
library(dplyr)
library(splitstackshape)
library(car)
svy=read.csv("../raw/ecpn_end.csv")
ggplot(ag.df[ag.df$treatment %in% 1,], aes(x = qip_group.borehole_use_end, y = attitude_cw, color = psu)) +
geom_point() +
geom_text(aes(label = psu), vjust = -1.5) +
theme_bw()
setwd("C:/Users/chris/Repos/ecpn_submission/data_and_code/review")
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
# Load data I anticipate needing
load("../survey_dat/c_creating_dataframes/f-aggregateComms_ap.Rdata")
load("../survey_dat/c_creating_dataframes/rand_df.Rdata")
load("../survey_dat/b_creating_outcomes/f2-panelData.Rdata")
load("../obs_dat/b_analysis/eventsMedian.Rdata")
load("../obs_dat/b_analysis/marketMedian.Rdata")
# clean environment
rm(list=ls(pattern="Var|var|.fun|Fun|Col|Index|Indice|Stand|fmla|outcomes"))
# Functions
## True p-value function.
load("../survey_dat/d_analysis/true_fun.rda")
# Packages
library(estimatr)
library(dplyr)
library(tidyverse)
library(ggplot2)
ggplot(ag.df[ag.df$treatment %in% 1,], aes(x = qip_group.borehole_use_end, y = attitude_cw, color = psu)) +
geom_point() +
geom_text(aes(label = psu), vjust = -1.5) +
theme_bw()
with(ag.df[ag.df$treatment %in% 1], plot(qip_group.borehole_use_end, attitude_cw))
summary(ag.df$attitude_cw)
sort(ag.df$attitude_cw)
quantile(ag.df$attitude_cw)
quantile(ag.df$attitude_cw,10)
?quantile
quantile(ag.df$attitude_cw,seq(0:1,0.1))
quantile(ag.df$attitude_cw,probs=seq(0:1,0.1))
quantile(ag.df$attitude_cw,probs=seq(0,1,0.1))
quantile(ag.df$attitude_cw,probs=seq(0,1,0.05))
# relationship b/ween borehole use and attitude change with semi-outliers removed
attitude_quants <- quantile(ag.df$attitude_cw,probs=seq(0,1,0.05))
attitude_quants
attitude_quants[0.95]
str(attitude_quants)
attitude_quants["95%"]
attitude_quants["5%"]
ag.df$attitude_cw_test <- ifelse(ag.df$attitude_cw>attitude_quants["95%"],
attitude_quants["95%"],
ifelse(ag.df$attitude_cw<attitude_quants["5%"],
attitude_quants["5%"], ag.df$attitude_cw))
table(ag.df$attitude_cw_test)
library(Hmisc)
install.packages("Hmisc")
library(Hmisc)
library(Hmisc)
update.packages()
update.packages("rmarkdown")
update.packages("htmltools")
library(Hmisc)
ag.df$attitude_cw_test <- winsorize(ag.df$attitude_cw, trim = 0.05, na.rm = TRUE)
